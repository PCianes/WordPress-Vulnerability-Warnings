const lowdb = require("lowdb");
const FileAsync = require("lowdb/adapters/FileAsync");

let db;

async function createConnection() {
  const adapter = new FileAsync("db.json");
  db = await lowdb(adapter);
  db.defaults({
    plugins: [],
    themes: [],
  }).write();
}

const getConnection = () => db;

async function getSavedData() {
  return await db.getState();
}

async function saveData(newData) {
  return await db.setState(newData).write();
}

module.exports = {
  createConnection,
  getConnection,
  getSavedData,
  saveData,
};
